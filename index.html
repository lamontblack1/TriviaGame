<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivia Game</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body background="./assets/images/bodyBackground.jpg">
    <div class="container mt-4">
        <div class="row">
            <div class="col-12 pb-4">
                <h1 id="triviaTitle" class="display-3 text-center">
                    <strong>
                        Trivia Night 
                        <span class="text-muted">Test Your Knowledge</span>
                    </strong>
                </h1>
                
            </div>
            <div class="col-2"></div>
                <div id="displayQuestions" class="col-8 mx-auto py-5">
                    <button id="startButton" type="button" class="btn btn-info btn-lg btn-block"><h2 class="display-5">Start</h2> </button>
                </div>
            <div class="col-2"></div>
        </div>
        <!-- <div class="row"> -->
        <!-- </div> -->
    </div>
        
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        // The array of questions for our quiz game. The first answer is the correct one
        let questions = [
            { q: "'Katniss Everdeen' takes her sister's place in the 'Hunger Games'. Which district does she represent?",
                a1: "12", a2: "6", a3: "3", a4: "7" },
            { q: "Where was American television presenter and tabloid talk show host Jerry Springer born?", 
                a1: "A subway", a2: "An ocean liner", a3: "A shopping mall", a4: "A plane" },
            { q: "Which planet in our solar system spins the fastest?", 
                a1: "Jupiter", a2: "Mercury", a3: "Neptune", a4: "Earth" },
            { q: "Which of the following James Bond films was the first to be released?", 
                a1: "From Russia With Love", a2: "You Only Live Twice", a3: "Thunderball", a4: "Goldfinger" },
            { q: "Useful for calculating internet speed and bandwidth, how many megabits are there in a megabyte?", 
                a1: "Eight", a2: "Six", a3: "Sixteen", a4: "Twelve" }
        ];
        const sortingArray = [1,2,3,4]
        const numberOfQuestions = questions.length
        let currentQuestionIndex = -1

        
        
        
        $("#startButton").on("click", function() {
            startNewQuestion();
            answerTimer();
        });
        
        
        function answerTimer() {
            // Start countdown timer here?
            
        }
        
        function startNewQuestion() {
        // Make sure there are more questions, if not, game over
        currentQuestionIndex++
        if (currentQuestionIndex === 5) {
            alert("Game Over. You have answered all of the questions!")
            $("#displayQuestions").empty()
            $("#triviaTitle").text("Game Over")

            return
        }
        // variable for loop to create answer buttons
        let answerNumber = ""
        // Get rid of the start button and old elements and add the elements for the display,
        // First the time remaining div, the question, then loop to create the answer buttons
        let displayQuestionsDiv = $("#displayQuestions");
        displayQuestionsDiv.empty()
        let newDiv = $("<div>");
        newDiv.html("<h1>Time Remaining: </h1><h1 id = 'timeRemainingText' class = 'mb-4'></h1>");
        displayQuestionsDiv.append(newDiv);
        
        // Now assign new div with question info
        newDiv = $("<div>");
            newDiv.html("<h2 id = 'questionText' class = 'text-center mb-4'></h2>");
            displayQuestionsDiv.append(newDiv);
            $("#questionText").text(questions[currentQuestionIndex].q)

            // Randomize the order of the answers since first question in array is the correct answer, a1
            sortingArray.sort(function() {
                return 0.5 - Math.random();
        });
        
        // Create and append the answer buttons (bootstrap divs), give each the id of the answer so we know correct answer, a1 is correct answer
        for (let i = 0; i < 4; i++) {
            answerNumber = "a" + sortingArray[i]    
            newDiv = $("<div>");
                // button is full width since parent is col-8, allows for answer to fit in button
                newDiv.attr("class","col-12 btn btn-info btn-lg btn-block mx-auto my-3 py-2 answer-button");
                newDiv.attr("id",answerNumber)
                // newDiv.attr("onclick","answerBtnClick(" + answerNumber +")");
                newDiv.text(questions[currentQuestionIndex][answerNumber]);
                displayQuestionsDiv.append(newDiv)
            }
        }
        
        
        $(document).on("click",".answer-button",function(event) {
            console.log($(this))
            if (this["id"] === "a1") {
                // answer is correct, stop timer, play answer right video
                alert("correct")

                // start new question
                startNewQuestion()
            }
            else {
                // $(this).attr("class","col-12 btn btn-danger btn-lg btn-block mx-auto my-3 py-2 disabled")
                alert("wrong")
                // do something here
                startNewQuestion()
            }
        })

        // This did not work for the dynamically created elements
        // $("#a1").on("click", function() {
        //     // alert($(this).val())
        //     // alert($(this).id())
        //     alert("hello")
        // });
        </script>
</body>
</html>